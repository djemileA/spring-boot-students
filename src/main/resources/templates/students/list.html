<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>–°—Ç—É–¥–µ–Ω—Ç—ã –∏ –∏—Ö —Ö–æ–±–±–∏</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { padding: 20px; background-color: #f8f9fa; }
        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: 10px; margin-bottom: 30px; }
        .card { margin-bottom: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); transition: transform 0.3s; }
        .card:hover { transform: translateY(-5px); }
        .badge-hobby { background-color: #6f42c1; margin: 2px; }
        .filter-box { background: white; padding: 20px; border-radius: 10px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
    </style>
</head>
<body>
    <div class="container">
        <div class="header text-center">
            <h1>üéì –°—Ç—É–¥–µ–Ω—Ç—ã –∏ –∏—Ö —Ö–æ–±–±–∏</h1>
            <p class="lead">–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ –∏–º–µ–Ω–∏ –∏ —Ö–æ–±–±–∏</p>
        </div>

        <!-- –§–∏–ª—å—Ç—Ä—ã -->
        <div class="filter-box">
            <form th:action="@{/students}" method="get" class="row g-3">
                <div class="col-md-5">
                    <label for="name" class="form-label">üîç –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏:</label>
                    <input type="text" class="form-control" id="name" name="name" 
                           th:value="${searchName}" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∏–ª–∏ —Ñ–∞–º–∏–ª–∏—é...">
                </div>
                <div class="col-md-5">
                    <label for="hobby" class="form-label">üéØ –§–∏–ª—å—Ç—Ä –ø–æ —Ö–æ–±–±–∏:</label>
                    <input type="text" class="form-control" id="hobby" name="hobby" 
                           th:value="${searchHobby}" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ö–æ–±–±–∏...">
                </div>
                <div class="col-md-2 d-flex align-items-end">
                    <button type="submit" class="btn btn-primary w-100">–ù–∞–π—Ç–∏</button>
                </div>
            </form>
            <div class="mt-3">
                <a th:href="@{/students}" class="btn btn-outline-secondary btn-sm">–°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</a>
                <a th:href="@{/students/new}" class="btn btn-success btn-sm ms-2">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–∞</a>
            </div>
        </div>

        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="row mb-4">
            <div class="col-md-12">
                <div class="alert alert-info">
                    <strong>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:</strong> –ù–∞–π–¥–µ–Ω–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤: <span th:text="${students.size()}">0</span> |
                    <span th:if="${searchName}">–§–∏–ª—å—Ç—Ä –ø–æ –∏–º–µ–Ω–∏: "<span th:text="${searchName}"></span>" | </span>
                    <span th:if="${searchHobby}">–§–∏–ª—å—Ç—Ä –ø–æ —Ö–æ–±–±–∏: "<span th:text="${searchHobby}"></span>"</span>
                </div>
            </div>
        </div>

        <!-- –°–ø–∏—Å–æ–∫ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ -->
        <div class="row" th:if="${students.empty}">
            <div class="col-md-12">
                <div class="alert alert-warning">
                    üö´ –°—Ç—É–¥–µ–Ω—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –∫—Ä–∏—Ç–µ—Ä–∏–∏ –ø–æ–∏—Å–∫–∞ –∏–ª–∏ 
                    <a th:href="@{/students/new}">–¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–∞</a>.
                </div>
            </div>
        </div>

        <div class="row" th:unless="${students.empty}">
            <div th:each="student : ${students}" class="col-md-6 col-lg-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">
                            <span th:text="${student.firstName + ' ' + student.lastName}"></span>
                            <span class="badge bg-secondary ms-2" th:text="${student.age + ' –ª–µ—Ç'}"></span>
                        </h5>
                        <h6 class="card-subtitle mb-2 text-muted" th:text="${student.email}"></h6>
                        
                        <p class="card-text">
                            <strong>–•–æ–±–±–∏:</strong><br>
                            <span
                        th:each="hobby : ${student.hobbies}" class="badge badge-hobby" th:text="${hobby}"></span>
                            <span th:if="${student.hobbies.empty}" class="text-muted">–ù–µ—Ç —Ö–æ–±–±–∏</span>
                        </p>
                        
                        <p class="card-text">
                            <small class="text-muted">
                                –î–æ–±–∞–≤–ª–µ–Ω: <span th:text="${#temporals.format(student.createdAt, 'dd.MM.yyyy HH:mm')}"></span>
                            </small>
                        </p>
                        
                        <div class="btn-group btn-group-sm">
                            <a th:href="@{/students/{id}/edit(id=${student.id})}" class="btn btn-outline-primary">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                            <a th:href="@{/students/{id}/delete(id=${student.id})}" 
                               class="btn btn-outline-danger"
                               onclick="return confirm('–£–¥–∞–ª–∏—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–∞?')">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ë–î -->
        <div class="mt-4 text-center text-muted">
            <hr>
            <p>
                <small>
                    üóÑÔ∏è –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è H2 Database (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è) | 
                    üíæ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ | 
                    üåê H2 Console: <a th:href="@{/h2-console}" target="_blank">/h2-console</a> (JDBC URL: jdbc:h2:mem:studentsdb)
                </small>
            </p>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>      
